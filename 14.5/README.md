> # Домашнее задание к занятию Troubleshooting

> ### Цель задания

> Устранить неисправности при деплое приложения.

> ### Чеклист готовности к домашнему заданию

> 1. Кластер K8s.

> ### Задание. При деплое приложение web-consumer не может подключиться к auth-db. Необходимо это исправить

> 1. Установить приложение по команде:
```shell
> kubectl apply -f https://raw.githubusercontent.com/netology-code/kuber-homeworks/main/3.5/files/task.yaml
```
> 2. Выявить проблему и описать.
> 3. Исправить проблему, описать, что сделано.
> 4. Продемонстрировать, что проблема решена.

-----
### Решение:

Применяем.

```shell
kubectl apply -f https://raw.githubusercontent.com/netology-code/kuber-homeworks/main/3.5/files/task.yaml
```

![](Kuber_14.5_1.1.jpg)

Видич, что нет нужных неймспейсов, создаем вручную.

![](Kuber_14.5_1.2.jpg)

Применяем заново.

```shell
kubectl apply -f https://raw.githubusercontent.com/netology-code/kuber-homeworks/main/3.5/files/task.yaml
```

![](Kuber_14.5_1.3.jpg)

На первый взгляд никакого криминала нет.

Исследуем деплойменты.

![](Kuber_14.5_1.4.jpg)

![](Kuber_14.5_1.5.jpg)

Смотрим логи и видим, 

![](Kuber_14.5_1.6.jpg)

![](Kuber_14.5_1.7.jpg)

Под не может подключиться к auth-db, т.к. поды находятся в разных неймспейсах.

Заходим в контейнер и проверяем доступ по IP, доступ есть.

![](Kuber_14.5_1.8.jpg)

Попробуем подключиться по полному доменному имени. Доступ есть.

![](Kuber_14.5_1.9.jpg)

Поэтому правим манифест. Применяем (файл был создан локально).

```shell
kubectl apply -f task.yaml
```

![](Kuber_14.5_1.10.jpg)

Старые контейнеры удалились, смотри логи новых подов.

![](Kuber_14.5_1.11.jpg)

------

> ### Правила приёма работы

> 1. Домашняя работа оформляется в своём Git-репозитории в файле README.md. Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.
> 2. Файл README.md должен содержать скриншоты вывода необходимых команд, а также скриншоты результатов.
> 3. Репозиторий должен содержать тексты манифестов или ссылки на них в файле README.md.