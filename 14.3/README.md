> # Домашнее задание к занятию «Как работает сеть в K8s»

> ### Цель задания

> Настроить сетевую политику доступа к подам.

> ### Чеклист готовности к домашнему заданию

> 1. Кластер K8s с установленным сетевым плагином Calico.

> ### Инструменты и дополнительные материалы, которые пригодятся для выполнения задания

> 1. [Документация Calico](https://www.tigera.io/project-calico/).
> 2. [Network Policy](https://kubernetes.io/docs/concepts/services-networking/network-policies/).
> 3. [About Network Policy](https://docs.projectcalico.org/about/about-network-policy).

-----

> ### Задание 1. Создать сетевую политику или несколько политик для обеспечения доступа

> 1. Создать deployment'ы приложений frontend, backend и cache и соответсвующие сервисы.
> 2. В качестве образа использовать network-multitool.
> 3. Разместить поды в namespace App.
> 4. Создать политики, чтобы обеспечить доступ frontend -> backend -> cache. Другие виды подключений должны быть запрещены.
> 5. Продемонстрировать, что трафик разрешён и запрещён.

-----
### Решение:

[front.yml](./front.yml)

[back.yml](./back.yml)

[cache.yml](./cache.yml)

[deny-all.yml](./deny-all.yml)

[allow-fron-to-back.yml](./allow-fron-to-back.yml)

[allow-back-to-cache.yml](./allow-back-to-cache.yml)

Кластер поднимаем из предыдущего задания

![](Kuber_14.3_1.1.jpg)

Устанавливаем Calico

![](Kuber_14.3_1.2.jpg)

Создем неймспэйс app, переключаемся в него, применяяем в Сервисы и деплойменты наших пролежинй

![](Kuber_14.3_1.3.jpg)

Проверяем доступность сервисов

![](Kuber_14.3_1.4.jpg)

Применяем политику запрета подключений

![](Kuber_14.3_1.5.jpg)

Применяем политику, разрешающую обращение от фронтенда к бакенду

![](Kuber_14.3_1.6.jpg)

Применяем политику, разрешающую обращение от бакенда к кэшу

![](Kuber_14.3_1.7.jpg)

-----

> ### Правила приёма работы

> 1. Домашняя работа оформляется в своём Git-репозитории в файле README.md. Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.
> 2. Файл README.md должен содержать скриншоты вывода необходимых команд, а также скриншоты результатов.
> 3. Репозиторий должен содержать тексты манифестов или ссылки на них в файле README.md.