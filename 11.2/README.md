> # Домашнее задание к занятию «Микросервисы: принципы»

# Q/A

> Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры. Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

 ## Задача 1: API Gateway

> Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.
> Решение должно соответствовать следующим требованиям:
> * маршрутизация запросов к нужному сервису на основе конфигурации,
> * возможность проверки аутентификационной информации в запросах,
> * обеспечение терминации HTTPS.    
> Обоснуйте свой выбор.
>  
> ---

Ответ:


| Решение    | Маршрутизация запросов | Проверка аутентификации | Терминация HTTPS |
|------------|-----------------------|-------------------------|------------------|
| Nginx       | Да                    | Да                      | Да               |
| Kong       | Да                    | Да                      | Да               |
| Tyk        | Да                    | Да                      | Да               |
| Apigee     | Да                    | Да                      | Да               |
| AWS API Gateway     | Да                    | Да                      | Да               |
| Ambassador | Да                    | Да                      | Да               |

На основании предложенных требований и сравнительной таблицы решений, я рекомендовал бы выбрать Kong в качестве решения для API Gateway. Вот обоснование:

* Маршрутизация запросов: Все предложенные решения обеспечивают возможность маршрутизации запросов на основе конфигурации. Однако Kong имеет гибкую и мощную систему управления маршрутизацией, позволяющую легко настраивать и изменять правила маршрутизации в реальном времени.

* Проверка аутентификации: Все решения поддерживают проверку аутентификационной информации в запросах. Однако Kong предлагает широкий спектр возможностей для аутентификации, таких как базовая аутентификация, создание кастомных плагинов аутентификации и интеграция с популярными сервисами аутентификации, такими как OAuth и JWT.

* Терминация HTTPS: Все решения обеспечивают возможность терминации HTTPS, что позволяет обеспечить безопасную передачу данных между клиентом и сервисом. Kong в этом отношении не является исключением и предоставляет возможности конфигурации SSL/TLS сертификатов и настроек безопасности.

Кроме того, Kong является популярным и широко используемым решением для API Gateway, имеет большое сообщество пользователей и хорошую документацию, что облегчает его внедрение и эксплуатацию в компании.

Помимо функций маршрутизации, аутентификации и терминации HTTPS, существуют и другие важные аспекты, которые DevOps-специалисту следует учитывать при выборе API Gateway для микросервисной архитектуры. Вот несколько дополнительных критериев, которые могут повлиять на выбор:

* Масштабируемость.
* Управление версиями API.
* Мониторинг и аналитика.
* Расширяемость.
* Надежность и отказоустойчивость.

## Задача 2: Брокер сообщений

> Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.
> Решение должно соответствовать следующим требованиям:
> * поддержка кластеризации для обеспечения надёжности,
> * хранение сообщений на диске в процессе доставки,
> * высокая скорость работы,
> * поддержка различных форматов сообщений,
> * разделение прав доступа к различным потокам сообщений,
> * простота эксплуатации.    
> Обоснуйте свой выбор.
>  
> ---

Ответ:

| Брокер         | Кластеризация | Хранение на диске | Скорость работы | Поддержка форматов | Разделение прав доступа | Простота эксплуатации |
|----------------|---------------|------------------|-----------------|--------------------|-------------------------|-----------------------|
| Apache Kafka   | Да            | Да               | Очень высокая    | Да                 | Да                      | Средняя               |
| RabbitMQ       | Да            | Да               | Высокая          | Да                 | Да                      | Высокая               |
| ActiveMQ       | Да            | Да               | Высокая          | Да                 | Да                      | Средняя               |
| Redis          | Да            | Нет              | Очень высокая    | Ограниченно         | Нет                     | Высокая               |
| Apache Pulsar  | Да            | Да               | Очень высокая    | Да                 | Да                      | Средняя               |

На основании таблицы, я выбираю Apache Kafka в качестве брокера сообщений. Он поддерживает кластеризацию, что обеспечивает надежность и высокую доступность.

Apache Kafka также хранит сообщения на диске в процессе доставки, что гарантирует сохранность данных даже в случае сбоев или отказов. Скорость работы Kafka очень высокая, что является важным фактором для обработки больших объемов данных.

Брокер Kafka также поддерживает различные форматы сообщений, что обеспечивает гибкость в работе с различными типами данных. Разделение прав доступа к различным потокам сообщений также реализовано в Kafka, что обеспечивает безопасность и контроль доступа.

В отношении простоты эксплуатации, Kafka требует некоторой изначальной конфигурации и настройки, но предлагает хорошую документацию и активное сообщество пользователей, что упрощает процесс развертывания и поддержания.

Опять же RabbitMQ обладает высокой скоростью работы и поддерживает кластеризацию, а ActiveMQ также обеспечивает быструю работу и имеет хорошую поддержку. Однако, они имеют несколько ограничений в сравнении с Apache Kafka.

Redis, хотя и является популярным инструментом для кэширования и хранения данных в памяти, не является идеальным выбором в качестве брокера сообщений. В отличие от Kafka, Redis не обеспечивает надежное хранение сообщений на диске и имеет ограниченные возможности поддержки форматов сообщений.

Apache Pulsar также представляет собой интересное решение в области брокеров сообщений, с высокой скоростью работы и поддержкой кластеризации. Однако, отличия в поддержке форматов сообщений и разделении прав доступа между потоками сообщений могут повлиять на выбор.

